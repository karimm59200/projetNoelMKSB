<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./distribution.css">
    <title>Distribution</title>
</head>
<body>
    <main>
      <header>
        <p id="countdown"></p>
      </header>
        <!-- SNOW -->
        <div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        <div class="snowflake"></div>
        </div>
        <!-- SNOW -->

        
        <!-- <div class="d-flex justify-content-center">
          <div class="btn-noel"><a href="./distribution.html" class="button-noel mt-4">Effectuer le tirage au sort</a></div> 
        </div> -->
       
        <section class="tirage">
          <div class="d-flex justify-content-around mb-5">
              <div id="donneur">Donneur</div>
              <div id="receveur">Receveur</div>
          </div>
          <div class="d-flex justify-content-around mb-5">
              <div><i class="fas fa-arrow-down"></i></div>
              <div><i class="fas fa-arrow-down"></i></div>
          </div>
          <div>
            <div class="d-flex justify-content-around">
              <div id="donne"></div>
              <div id="recev"></div>
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <button
              id="tas1"
              class="d-flex justify-content-center"
              onclick="tiragePersonnes(array_name)"
            >
              <section id="cadeaux">
                <div class="">
                  <div class="row" id="cadeaux-anim">
                    <div class="col-12 mt-5 d-flex justify-content-center">
                      <div class="box">
                        <div class="box-body">
                          <img onclick="tiragePersonnes()"
                            class="img"
                            id="img-cadeaux"
                            src="./img/x-mas.png"
                          />
                          <div class="box-lid">
                            <div class="box-bowtie"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </button>
          </div>
        </section>
        
        
        <footer class="footer">
          <div class="div-conteneur">
            <div class="conteneur">
              <span>Thème 1 / Thème 2</span>
              <input type="checkbox" class="checkbox" id="chk" />
              <label class="label" for="chk">
                <i class="fas fa-circle" id="circleBlue"></i>
                <i class="fas fa-circle" id="circleRed"></i>
                <div class="ball"></div>
              </label>
            </div>
          </div>
          <div class="" id="retour">
            <a href="./index.html"><button class="btn btn-primary" id="btn-retour">Retour à la page d'acceuil</button></a>
          </div>
          <input type="button" class="btn btn-primary" value="Retour" id="retourarr" onclick="history.go(-1)" />
    </footer>
    </main>
    <script>
      var tableau_non_melanger = [];
      var tableau_melanger = [];
      function chercherDataBackB1()
    {
        // new creation d'un objet XMLHttpRequest 
        const xhttp = new XMLHttpRequest();
        
        // je defini la fonction qui sera utilisé une fois les données chargées
        xhttp.onload = function() 
        {
            console.log(this.responseText );
            let dict =  JSON.parse(  this.responseText );
            tableau_non_melanger = dict[ 'non_melanger' ];
            tableau_melanger = dict[ 'melanger' ];
        }

        // je prépare l'appel de l'URL
        xhttp.open("GET", "selectionPersonnesAleatoire.php");
        // j'envoie l'url
        xhttp.send();
    }
      let donne = document.querySelector("#donne");
      let recev = document.querySelector("#recev");
      
      function tiragePersonnes() {
        let terminer = false;
        let donneur;
        let receveur;
        donneur = tableau_non_melanger[0];
        receveur = tableau_melanger[0];

        if (tableau_non_melanger.length === 0) {
          donneur = "";
          receveur = "";
          terminer = true;
        }
        console.log(tableau_non_melanger);  
        if (terminer === false) {
          if (donneur === receveur) {
            // console.log("if passé");
            while (donneur === receveur) {
              //   console.log("while passé", donneur, receveur);
              receveur = tableau_melanger[0];
              //   console.log("while passé", donneur, receveur);
            }
          }

          tableau_melanger.splice(0,1);
          tableau_non_melanger.splice(0,1);
          console.log(donneur);
          console.log(receveur);
          
          donne.innerHTML = donneur;
          recev.innerHTML = receveur;
        }
      }

      chercherDataBackB1();

      tiragePersonnes();

    </script>
    <script src="./script.js"></script>
    <script src="theme.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>